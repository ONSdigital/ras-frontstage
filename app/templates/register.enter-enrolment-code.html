{% import 'partials/section.html' as section %}
{% extends "layouts/_twocol.html" %}

{% set errorType = data['error']['type'] %}

{% block page_title %}Register{% endblock %}

{% block main %}

{% if errorType == "failed" %}
<div class="panel panel--error">
    <div class="panel__header">
        <h1 class="panel__title venus">Enrolment code not valid</h1>
    </div>
    <div class="panel__body" data-qa="error-body">
        <p class="mars"><a onclick="focusOn('enrolment_code');" href="#enrolment_code">Please re-enter the code and try again</a></p>
    </div>
</div>
<br/>
{% endif %}

<section>

    <form
            method="post"
            action="{{ url_for('register') }}"
            class="form"
            role="form">

        <h1 class="saturn">Create an account</h1>

        {% if errorType == "failed" %}
        <div class="panel panel--simple panel--error panel--spacious">
            <p class="error-message">Please enter a valid enrolment code</p>
        {% endif %}

            <div class="field">

                {{ form.csrf_token}}

                {{ form.enrolment_code.label(class_='label') }}

                <span class="label__description label__inner pluto">You'll find this in the letter we sent you</span>
                {{ form.enrolment_code(class_='input input--text input-type__input') }}
            </div>

        {% if errorType == "failed" %}
        </div>
        {% endif %}

        <br/>

        <button class="btn btn--primary venus" type="submit">Continue</button>

    </form>

    <p>Already have an account? <a href="/sign-in">sign in here</a></p>
</section>


{% endblock main %}
